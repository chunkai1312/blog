{"title":"解決 Gitbook 匯出 PDF 檔案時沒有產出的問題","slug":"solving-the-problem-that-gitbook-exporting-pdf-without-results","date":"2019-12-16T03:31:34.000Z","updated":"2021-09-05T09:20:28.783Z","comments":true,"path":"api/articles/solving-the-problem-that-gitbook-exporting-pdf-without-results.json","excerpt":" [Figure] 先前嘗試使用 Gitbook 匯出 PDF 檔案時，發生沒有結果，也沒有回報任何錯誤的問題，經查發現是 Calibre 版本問題所致，在此記錄。","covers":["/2019/12/16/solving-the-problem-that-gitbook-exporting-pdf-without-results/cover.png"],"content":"<p><img src=\"/2019/12/16/solving-the-problem-that-gitbook-exporting-pdf-without-results/cover.png\"></p>\n<blockquote>\n<p>先前嘗試使用 <a href=\"https://github.com/GitbookIO/gitbook\">Gitbook</a> 匯出 PDF 檔案時，發生沒有結果，也沒有回報任何錯誤的問題，經查發現是 Calibre 版本問題所致，在此記錄。</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<h2 id=\"環境\"><a href=\"#環境\" class=\"headerlink\" title=\"環境\"></a>環境</h2><ul>\n<li>macOS Mojave 10.14.6</li>\n<li>calibre 4.6.0</li>\n<li>gitbook-cli 2.3.2</li>\n<li>GitBook version: 3.2.3</li>\n</ul>\n<h2 id=\"問題描述\"><a href=\"#問題描述\" class=\"headerlink\" title=\"問題描述\"></a>問題描述</h2><p>按 <a href=\"https://github.com/GitbookIO/gitbook/blob/master/docs/ebook.md\">文件</a> 說明，在編寫 gitbook 的目錄下，以下指令應該產生一個 PDF 檔案：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs awk\">$ gitbook pdf .<span class=\"hljs-regexp\">/ ./my</span>book.pdf<br></code></pre></td></tr></table></figure>\n\n<p>在 Terminal 上顯示類似以下的輸出，持續很長時間無結果，也沒有任何的錯誤回報：</p>\n<figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs avrasm\"><span class=\"hljs-symbol\">info:</span> <span class=\"hljs-number\">7</span> plugins are installed<br><span class=\"hljs-symbol\">info:</span> <span class=\"hljs-number\">6</span> explicitly listed<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;highlight&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;search&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;lunr&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;sharing&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;fontsettings&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;theme-default&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> found <span class=\"hljs-number\">3</span> pages<br><span class=\"hljs-symbol\">info:</span> found <span class=\"hljs-number\">2</span> asset files<br></code></pre></td></tr></table></figure>\n\n<p>因此，再次執行以下指令後查看更詳細的 log 訊息：</p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs jboss-cli\">$ gitbook pdf <span class=\"hljs-string\">./</span> <span class=\"hljs-string\">./mybook.pdf</span> <span class=\"hljs-params\">--log=debug</span> —debug<br></code></pre></td></tr></table></figure>\n\n<p>然後在 Terminal 上顯示類似以下的輸出：</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs vim\">debu<span class=\"hljs-variable\">g:</span> Auto generated TOC with <span class=\"hljs-number\">3</span> entries.<br>debu<span class=\"hljs-variable\">g:</span> Flattening CSS <span class=\"hljs-built_in\">and</span> remapping font sizes...<br>debu<span class=\"hljs-variable\">g:</span> Source base font size <span class=\"hljs-keyword\">is</span> <span class=\"hljs-number\">12.00000</span><span class=\"hljs-keyword\">pt</span><br>debu<span class=\"hljs-variable\">g:</span> Removing fake margins...<br>debu<span class=\"hljs-variable\">g:</span> Cleaning <span class=\"hljs-keyword\">up</span> manifest...<br>Trimming unused <span class=\"hljs-keyword\">files</span> from manifest...<br>debu<span class=\"hljs-variable\">g:</span> Creating PDF Output...<br>debu<span class=\"hljs-variable\">g:</span> <span class=\"hljs-number\">67</span>% Running PDF Output plugin<br>debu<span class=\"hljs-variable\">g:</span> <span class=\"hljs-number\">68</span>% Parsed <span class=\"hljs-keyword\">all</span> content <span class=\"hljs-keyword\">for</span> markup transformation<br>debu<span class=\"hljs-variable\">g:</span> <span class=\"hljs-number\">70</span>% Completed markup transformation<br>debu<span class=\"hljs-variable\">g:</span> [<span class=\"hljs-number\">1106</span>/<span class=\"hljs-number\">220730.806158</span>:ERROR:icu_util.<span class=\"hljs-keyword\">cc</span>(<span class=\"hljs-number\">177</span>)] Invalid <span class=\"hljs-keyword\">file</span> descriptor <span class=\"hljs-keyword\">to</span> ICU data received.<br>[<span class=\"hljs-number\">1106</span>/<span class=\"hljs-number\">220730.806170</span>:ERROR:icu_util.<span class=\"hljs-keyword\">cc</span>(<span class=\"hljs-number\">177</span>)] Invalid <span class=\"hljs-keyword\">file</span> descriptor <span class=\"hljs-keyword\">to</span> ICU data received.<br>debu<span class=\"hljs-variable\">g:</span> [<span class=\"hljs-number\">1106</span>/<span class=\"hljs-number\">220730.806054</span>:ERROR:icu_util.<span class=\"hljs-keyword\">cc</span>(<span class=\"hljs-number\">177</span>)] Invalid <span class=\"hljs-keyword\">file</span> descriptor <span class=\"hljs-keyword\">to</span> ICU data received.<br>debu<span class=\"hljs-variable\">g:</span> [<span class=\"hljs-number\">1106</span>/<span class=\"hljs-number\">220730.812668</span>:ERROR:icu_util.<span class=\"hljs-keyword\">cc</span>(<span class=\"hljs-number\">177</span>)] Invalid <span class=\"hljs-keyword\">file</span> descriptor <span class=\"hljs-keyword\">to</span> ICU data received.<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"解決方法\"><a href=\"#解決方法\" class=\"headerlink\" title=\"解決方法\"></a>解決方法</h2><p>在 <a href=\"https://stackoverflow.com/questions/58498643/no-result-or-error-when-using-gitbook-pdf\">stackoverflow</a> 上找到一則同樣問題的解決方法，總之就是將 <code>calibre-ebook</code> 版本從 4.X 降至 3.x 即可。可以在這個 <a href=\"https://download.calibre-ebook.com/3.html\">頁面</a> 上找到 <code>calibre-ebook</code> 3.x 的版本。</p>\n<p>安裝完成後，重新執行以下指令後順利產生 PDF 檔案。</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs awk\">$ gitbook pdf .<span class=\"hljs-regexp\">/ ./my</span>book.pdf<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://blog.kawa-xxx.jp/entry/2019/11/23/143439\">gitbook で PDF を書き出そうと思ったら応答がなかった - かわろぐ</a></li>\n<li><a href=\"https://stackoverflow.com/questions/58498643/no-result-or-error-when-using-gitbook-pdf\">macos - No result or error when using <code>gitbook pdf</code> - Stack Overflow</a></li>\n</ul>\n","more":"<h2 id=\"環境\"><a href=\"#環境\" class=\"headerlink\" title=\"環境\"></a>環境</h2><ul>\n<li>macOS Mojave 10.14.6</li>\n<li>calibre 4.6.0</li>\n<li>gitbook-cli 2.3.2</li>\n<li>GitBook version: 3.2.3</li>\n</ul>\n<h2 id=\"問題描述\"><a href=\"#問題描述\" class=\"headerlink\" title=\"問題描述\"></a>問題描述</h2><p>按 <a href=\"https://github.com/GitbookIO/gitbook/blob/master/docs/ebook.md\">文件</a> 說明，在編寫 gitbook 的目錄下，以下指令應該產生一個 PDF 檔案：</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs awk\">$ gitbook pdf .<span class=\"hljs-regexp\">/ ./my</span>book.pdf<br></code></pre></td></tr></table></figure>\n\n<p>在 Terminal 上顯示類似以下的輸出，持續很長時間無結果，也沒有任何的錯誤回報：</p>\n<figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs avrasm\"><span class=\"hljs-symbol\">info:</span> <span class=\"hljs-number\">7</span> plugins are installed<br><span class=\"hljs-symbol\">info:</span> <span class=\"hljs-number\">6</span> explicitly listed<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;highlight&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;search&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;lunr&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;sharing&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;fontsettings&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> loading plugin <span class=\"hljs-string\">&quot;theme-default&quot;</span>... OK<br><span class=\"hljs-symbol\">info:</span> found <span class=\"hljs-number\">3</span> pages<br><span class=\"hljs-symbol\">info:</span> found <span class=\"hljs-number\">2</span> asset files<br></code></pre></td></tr></table></figure>\n\n<p>因此，再次執行以下指令後查看更詳細的 log 訊息：</p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs jboss-cli\">$ gitbook pdf <span class=\"hljs-string\">./</span> <span class=\"hljs-string\">./mybook.pdf</span> <span class=\"hljs-params\">--log=debug</span> —debug<br></code></pre></td></tr></table></figure>\n\n<p>然後在 Terminal 上顯示類似以下的輸出：</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs vim\">debu<span class=\"hljs-variable\">g:</span> Auto generated TOC with <span class=\"hljs-number\">3</span> entries.<br>debu<span class=\"hljs-variable\">g:</span> Flattening CSS <span class=\"hljs-built_in\">and</span> remapping font sizes...<br>debu<span class=\"hljs-variable\">g:</span> Source base font size <span class=\"hljs-keyword\">is</span> <span class=\"hljs-number\">12.00000</span><span class=\"hljs-keyword\">pt</span><br>debu<span class=\"hljs-variable\">g:</span> Removing fake margins...<br>debu<span class=\"hljs-variable\">g:</span> Cleaning <span class=\"hljs-keyword\">up</span> manifest...<br>Trimming unused <span class=\"hljs-keyword\">files</span> from manifest...<br>debu<span class=\"hljs-variable\">g:</span> Creating PDF Output...<br>debu<span class=\"hljs-variable\">g:</span> <span class=\"hljs-number\">67</span>% Running PDF Output plugin<br>debu<span class=\"hljs-variable\">g:</span> <span class=\"hljs-number\">68</span>% Parsed <span class=\"hljs-keyword\">all</span> content <span class=\"hljs-keyword\">for</span> markup transformation<br>debu<span class=\"hljs-variable\">g:</span> <span class=\"hljs-number\">70</span>% Completed markup transformation<br>debu<span class=\"hljs-variable\">g:</span> [<span class=\"hljs-number\">1106</span>/<span class=\"hljs-number\">220730.806158</span>:ERROR:icu_util.<span class=\"hljs-keyword\">cc</span>(<span class=\"hljs-number\">177</span>)] Invalid <span class=\"hljs-keyword\">file</span> descriptor <span class=\"hljs-keyword\">to</span> ICU data received.<br>[<span class=\"hljs-number\">1106</span>/<span class=\"hljs-number\">220730.806170</span>:ERROR:icu_util.<span class=\"hljs-keyword\">cc</span>(<span class=\"hljs-number\">177</span>)] Invalid <span class=\"hljs-keyword\">file</span> descriptor <span class=\"hljs-keyword\">to</span> ICU data received.<br>debu<span class=\"hljs-variable\">g:</span> [<span class=\"hljs-number\">1106</span>/<span class=\"hljs-number\">220730.806054</span>:ERROR:icu_util.<span class=\"hljs-keyword\">cc</span>(<span class=\"hljs-number\">177</span>)] Invalid <span class=\"hljs-keyword\">file</span> descriptor <span class=\"hljs-keyword\">to</span> ICU data received.<br>debu<span class=\"hljs-variable\">g:</span> [<span class=\"hljs-number\">1106</span>/<span class=\"hljs-number\">220730.812668</span>:ERROR:icu_util.<span class=\"hljs-keyword\">cc</span>(<span class=\"hljs-number\">177</span>)] Invalid <span class=\"hljs-keyword\">file</span> descriptor <span class=\"hljs-keyword\">to</span> ICU data received.<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"解決方法\"><a href=\"#解決方法\" class=\"headerlink\" title=\"解決方法\"></a>解決方法</h2><p>在 <a href=\"https://stackoverflow.com/questions/58498643/no-result-or-error-when-using-gitbook-pdf\">stackoverflow</a> 上找到一則同樣問題的解決方法，總之就是將 <code>calibre-ebook</code> 版本從 4.X 降至 3.x 即可。可以在這個 <a href=\"https://download.calibre-ebook.com/3.html\">頁面</a> 上找到 <code>calibre-ebook</code> 3.x 的版本。</p>\n<p>安裝完成後，重新執行以下指令後順利產生 PDF 檔案。</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs awk\">$ gitbook pdf .<span class=\"hljs-regexp\">/ ./my</span>book.pdf<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"參考資料\"><a href=\"#參考資料\" class=\"headerlink\" title=\"參考資料\"></a>參考資料</h2><ul>\n<li><a href=\"https://blog.kawa-xxx.jp/entry/2019/11/23/143439\">gitbook で PDF を書き出そうと思ったら応答がなかった - かわろぐ</a></li>\n<li><a href=\"https://stackoverflow.com/questions/58498643/no-result-or-error-when-using-gitbook-pdf\">macos - No result or error when using <code>gitbook pdf</code> - Stack Overflow</a></li>\n</ul>","categories":[{"name":"工具應用","path":"api/categories/工具應用.json"}],"tags":[{"name":"Gitbook","path":"api/tags/Gitbook.json"},{"name":"PDF","path":"api/tags/PDF.json"},{"name":"Calibre","path":"api/tags/Calibre.json"}]}